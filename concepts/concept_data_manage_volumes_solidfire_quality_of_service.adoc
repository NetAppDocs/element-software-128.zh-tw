---
permalink: concepts/concept_data_manage_volumes_solidfire_quality_of_service.html 
sidebar: sidebar 
keywords: solidfire, element, qos, performance, iops 
summary: 'SolidFire儲存叢集能夠按磁碟區提供服務品質 (QoS) 參數。您可以使用定義 QoS 的三個可設定參數來保證以每秒輸入和輸出 (IOPS) 衡量的叢集效能：最小 IOPS、最大 IOPS 和突發 IOPS。' 
---
= 服務性能和品質
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SolidFire儲存叢集能夠按磁碟區提供服務品質 (QoS) 參數。您可以使用定義 QoS 的三個可設定參數來保證以每秒輸入和輸出 (IOPS) 衡量的叢集效能：最小 IOPS、最大 IOPS 和突發 IOPS。


NOTE: SolidFire Active IQ有一個 QoS 建議頁面，提供有關 QoS 設定的最佳配置和設定的建議。



== 服務品質參數

IOPS參數定義方式如下：

* *最小 IOPS* - 儲存叢集每秒向磁碟區提供的最小持續輸入和輸出次數 (IOPS)。為磁碟區配置的最小 IOPS 是該磁碟區的保證效能水準。性能不會低於這個水平。
* *最大 IOPS* - 儲存叢集向磁碟區提供的最大持續 IOPS 數。當集群 IOPS 水準達到極高水準時，不會超過此 IOPS 性能水準。
* *突發IOPS* - 在短時間內允許的最大突發IOPS數。如果磁碟區的運行速度低於最大 IOPS，則會累積突發積分。當效能水準非常高並達到最大值時，允許磁碟區上出現短暫的 IOPS 突發。
+
Element 軟體在叢集 IOPS 利用率較低時使用突發 IOPS。

+
單一卷可以累積突發 IOPS，並使用這些積分在設定的「突發週期」內將其 IOPS 提升至超過其最大 IOPS 水平，直至達到其突發 IOPS 水平。如果群集有容量容納突發流量，則磁碟區的突發流量最多可持續 60 秒。如果磁碟區的運行速度低於其最大 IOPS 限制，則該磁碟區每運行一秒，即可獲得一秒的突發信用額度（最多 60 秒）。

+
突發IOPS受限於以下兩個面向：

+
** 卷的突發性能可以超過其最大 IOPS，持續時間等於該卷已累積的突發信用數。
** 當某個音量達到其最大 IOPS 設定值以上時，它會受到其突發 IOPS 設定值的限制。因此，突發 IOPS 永遠不會超過卷的突發 IOPS 設定值。


* *有效最大頻寬* - 最大頻寬是透過將 IOPS 數（基於 QoS 曲線）乘以 IO 大小來計算的。
+
例如：QoS 參數設定為 100 最小 IOPS、1000 最大 IOPS 和 1500 突發 IOPS，對效能品質有以下影響：

+
** 工作負載能夠達到並維持最大 1000 IOPS，直到叢集上出現 IOPS 工作負載爭用的情況。然後逐步降低 IOPS，直到所有磁碟區上的 IOPS 都達到指定的 QoS 範圍，從而緩解效能爭用。
** 所有捲的性能都力求達到最低 IOPS 100。當工作負載爭用得到緩解時，IOPS 水準不會低於最小 IOPS 設置，但可能會高於 100 IOPS。
** 性能不會超過 1000 IOPS，也不會在一段時間內低於 100 IOPS。允許達到 1500 IOPS（突發 IOPS）的性能，但僅限於那些透過在低於最大 IOPS 的運行下累積突發積分的捲，並且只允許在短時間內使用。爆發強度永遠不會持續。






== QoS 值限制

以下是 QoS 的可能最小值和最大值。

[cols="7*"]
|===
| 參數 | 最小值 | 預設 | 4.4KB | 5.8KB | 6 16KB | 262KB 


| 最小 IOPS | 50 | 50 | 15,000 | 9,375* | 5556* | 385* 


| 最大 IOPS | 100 | 15,000 | 200,000** | 125,000 | 74,074 | 5128 


| 突發IOPS | 100 | 15,000 | 200,000** | 125,000 | 74.074 | 5128 
|===
*這些估算值均為近似值。 **最大 IOPS 和突發 IOPS 可以設定為高達 200,000；但是，此設定僅允許有效地解除磁碟區的效能限制。卷的實際最大效能受叢集使用情況和單一節點效能的限制。



== 服務品質性能

QoS 效能曲線顯示了區塊大小與 IOPS 百分比之間的關係。

資料區塊大小和頻寬直接影響應用程式可獲得的 IOPS 數量。 Element 軟體會考慮接收到的區塊大小，並將區塊大小標準化為 4k。根據工作負載情況，系統可能會增加資料區塊大小。隨著資料塊大小的增加，系統會將頻寬增加到足以處理更大資料塊大小的水平。隨著頻寬的增加，系統能夠達到的IOPS數量會減少。

QoS效能曲線顯示了區塊大小增加與IOPS百分比下降之間的關係：

image::../media/solidfire_qos_performance_curve.png[描述了 QoS 中區塊大小增加與 IOPS 之間的關係。]

例如，如果區塊大小為 4k，頻寬為 4000 KBps，則 IOPS 為 1000。如果區塊大小增加到 8k，頻寬增加到 5000 KBps，IOPS 減少到 625。透過考慮資料區塊大小，該系統確保使用較大資料區塊大小的低優先權工作負載（例如備份和虛擬機器管理程式活動）不會佔用使用較小資料區塊大小的高優先權流量所需的過多效能。



== QoS策略

QoS 策略可讓您建立和儲存可套用於多個磁碟區的標準化服務品質設定。

QoS 策略最適合服務環境，例如資料庫、應用程式或基礎架構伺服器很少重啟，並且需要持續平等地存取儲存。單一卷 QoS 最適合輕度使用的虛擬機，例如虛擬桌面或專用資訊亭型虛擬機，這些虛擬機可能每天或一天多次重新啟動、開機或關機。

QoS 和 QoS 策略不應該同時使用。如果您正在使用 QoS 策略，請不要在磁碟區上使用自訂 QoS。自訂 QoS 將覆蓋和調整磁碟區 QoS 設定的 QoS 策略值。


NOTE: 若要使用 QoS 策略，所選叢集必須是 Element 10.0 或更高版本；否則，QoS 策略功能將無法使用。



== 查找更多信息

* https://docs.netapp.com/us-en/element-software/index.html["SolidFire和 Element 軟體文檔"]

